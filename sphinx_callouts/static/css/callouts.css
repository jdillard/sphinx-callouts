/* CSS for sphinx-callouts extension */

/* CSS Custom Properties for theme-agnostic design */
:root {
    /* Color variables */
    --callout-marker-color: var(--color-code-foreground, #333);
    --callout-marker-color-dark: var(--color-code-foreground, #f8f8f2);
    --callout-background: var(--color-background-primary, transparent);
    --callout-annotation-bg: var(--color-background-secondary, #f8f9fa);
    --callout-annotation-border: var(--color-border-primary, #dee2e6);

    /* Typography variables */
    --callout-font-family: var(--font-stack-monospace, "SFMono-Regular", "Menlo", "Monaco", "Consolas", "Liberation Mono", "Courier New", monospace);
    --callout-font-size: inherit;
    --callout-line-height: 1.4em;

    /* Spacing variables */
    --callout-marker-spacing: 0.5em;
    --callout-annotation-padding: 0.75rem;
    --callout-annotation-margin: 0.5rem 0;
}

.callout-code-wrapper {
    position: relative;
    background: var(--callout-background);
}

.callout-inline-marker {
    font-family: var(--callout-font-family);
    font-size: var(--callout-font-size);
    line-height: var(--callout-line-height);
    color: var(--callout-marker-color);
    pointer-events: none;
    /* Prevent selection to avoid interference with code copying */
    user-select: none;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    white-space: nowrap;
}

/* Set line height CSS custom property based on the highlight theme */
.highlight {
    --code-line-height: var(--callout-line-height);
}

/* Ensure the wrapper maintains the proper height */
.callout-code-wrapper .highlight pre {
    position: relative;
}

/* Theme-aware dark mode support */
@media (prefers-color-scheme: dark) {
    :root {
        --callout-marker-color: var(--callout-marker-color-dark);
        --callout-annotation-bg: var(--color-background-secondary, #2d3748);
        --callout-annotation-border: var(--color-border-primary, #4a5568);
    }

    .callout-marker {
        color: var(--callout-marker-color);
    }
}

/* Style field lists inside callout annotations to be inline */
.callout .annotations dl.field-list dt {
    float: left;
    clear: left;
    width: auto;
    margin-right: var(--callout-marker-spacing);
    font-weight: bold;
}

.callout .annotations dl.field-list dd {
    margin-left: 0;
    padding-left: 0;
}

.callout .annotations dl.field-list dd::after {
    content: "";
    display: table;
    clear: both;
}

.callout .annotations dd p {
    margin: var(--callout-annotation-margin);
}

/* Theme-specific adjustments using CSS custom properties */
body[data-theme="dark"] .callout-marker {
    color: var(--callout-marker-color);
}